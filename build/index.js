/*!
 * 
 * lattice-utils - v0.12.0
 * OpenLattice JavaScript library for common utilities
 * https://github.com/openlattice/lattice-utils
 *
 * Copyright (c) 2017-2021, OpenLattice, Inc. All rights reserved.
 *
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.LatticeUtils=t():e.LatticeUtils=t()}(self,(function(){return(()=>{var e={766:(e,t,r)=>{e.exports=r(698)},116:(e,t,r)=>{e.exports=r(424)},914:(e,t,r)=>{e.exports=r(143)},580:(e,t,r)=>{e.exports=r(436)},987:(e,t,r)=>{e.exports=r(190)},828:(e,t,r)=>{e.exports=r(350)},368:(e,t,r)=>{e.exports=r(496)},978:(e,t,r)=>{e.exports=r(819)},474:(e,t,r)=>{e.exports=r(140)},74:(e,t,r)=>{e.exports=r(712)},649:(e,t,r)=>{e.exports=r(133)},310:(e,t,r)=>{e.exports=r(53)},902:(e,t,r)=>{e.exports=r(486)},60:(e,t,r)=>{e.exports=r(155)},476:(e,t,r)=>{e.exports=r(697)},592:(e,t,r)=>{e.exports=r(273)},363:(e,t,r)=>{e.exports=r(976)},996:(e,t,r)=>{e.exports=r(671)},238:(e,t,r)=>{e.exports=r(432)},341:(e,t,r)=>{e.exports=r(255)},446:(e,t,r)=>{e.exports=r(872)},43:function(e,t,r){var n,o;!function(i,a){"use strict";n=function(){var e=function(){},t="undefined",r=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),n=["trace","debug","info","warn","error"];function o(e,t){var r=e[t];if("function"==typeof r.bind)return r.bind(e);try{return Function.prototype.bind.call(r,e)}catch(t){return function(){return Function.prototype.apply.apply(r,[e,arguments])}}}function i(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function a(n){return"debug"===n&&(n="log"),typeof console!==t&&("trace"===n&&r?i:void 0!==console[n]?o(console,n):void 0!==console.log?o(console,"log"):e)}function s(t,r){for(var o=0;o<n.length;o++){var i=n[o];this[i]=o<t?e:this.methodFactory(i,t,r)}this.log=this.debug}function u(e,r,n){return function(){typeof console!==t&&(s.call(this,r,n),this[e].apply(this,arguments))}}function l(e,t,r){return a(e)||u.apply(this,arguments)}function c(e,r,o){var i,a=this,u="loglevel";function c(e){var r=(n[e]||"silent").toUpperCase();if(typeof window!==t&&u){try{return void(window.localStorage[u]=r)}catch(e){}try{window.document.cookie=encodeURIComponent(u)+"="+r+";"}catch(e){}}}function f(){var e;if(typeof window!==t&&u){try{e=window.localStorage[u]}catch(e){}if(typeof e===t)try{var r=window.document.cookie,n=r.indexOf(encodeURIComponent(u)+"=");-1!==n&&(e=/^([^;]+)/.exec(r.slice(n))[1])}catch(e){}return void 0===a.levels[e]&&(e=void 0),e}}"string"==typeof e?u+=":"+e:"symbol"==typeof e&&(u=void 0),a.name=e,a.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},a.methodFactory=o||l,a.getLevel=function(){return i},a.setLevel=function(r,n){if("string"==typeof r&&void 0!==a.levels[r.toUpperCase()]&&(r=a.levels[r.toUpperCase()]),!("number"==typeof r&&r>=0&&r<=a.levels.SILENT))throw"log.setLevel() called with invalid level: "+r;if(i=r,!1!==n&&c(r),s.call(a,r,e),typeof console===t&&r<a.levels.SILENT)return"No console available for logging"},a.setDefaultLevel=function(e){f()||a.setLevel(e,!1)},a.enableAll=function(e){a.setLevel(a.levels.TRACE,e)},a.disableAll=function(e){a.setLevel(a.levels.SILENT,e)};var p=f();null==p&&(p=null==r?"WARN":r),a.setLevel(p,!1)}var f=new c,p={};f.getLogger=function(e){if("symbol"!=typeof e&&"string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=p[e];return t||(t=p[e]=new c(e,f.getLevel(),f.methodFactory)),t};var v=typeof window!==t?window.log:void 0;return f.noConflict=function(){return typeof window!==t&&window.log===f&&(window.log=v),f},f.getLoggers=function(){return p},f.default=f,f},void 0===(o="function"==typeof n?n.call(t,r,t,e):n)||(e.exports=o)}()},273:e=>{"use strict";e.exports=require("core-js-pure/features/array/from")},976:e=>{"use strict";e.exports=require("core-js-pure/features/array/is-array")},671:e=>{"use strict";e.exports=require("core-js-pure/features/get-iterator-method")},432:e=>{"use strict";e.exports=require("core-js-pure/features/instance/slice")},255:e=>{"use strict";e.exports=require("core-js-pure/features/object/define-property")},872:e=>{"use strict";e.exports=require("core-js-pure/features/symbol")},698:e=>{"use strict";e.exports=require("core-js-pure/stable/instance/concat")},424:e=>{"use strict";e.exports=require("core-js-pure/stable/instance/filter")},143:e=>{"use strict";e.exports=require("core-js-pure/stable/instance/for-each")},436:e=>{"use strict";e.exports=require("core-js-pure/stable/instance/includes")},190:e=>{"use strict";e.exports=require("core-js-pure/stable/instance/slice")},350:e=>{"use strict";e.exports=require("core-js-pure/stable/instance/starts-with")},496:e=>{"use strict";e.exports=require("core-js-pure/stable/object/define-properties")},819:e=>{"use strict";e.exports=require("core-js-pure/stable/object/define-property")},140:e=>{"use strict";e.exports=require("core-js-pure/stable/object/freeze")},712:e=>{"use strict";e.exports=require("core-js-pure/stable/object/get-own-property-descriptor")},133:e=>{"use strict";e.exports=require("core-js-pure/stable/object/get-own-property-descriptors")},53:e=>{"use strict";e.exports=require("core-js-pure/stable/object/get-own-property-symbols")},486:e=>{"use strict";e.exports=require("core-js-pure/stable/object/keys")},155:e=>{"use strict";e.exports=require("core-js-pure/stable/parse-float")},697:e=>{"use strict";e.exports=require("core-js-pure/stable/promise")}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,r),i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};return(()=>{"use strict";r.r(n),r.d(n,{AxiosUtils:()=>t,BinaryUtils:()=>o,DataUtils:()=>s,DateTimeUtils:()=>u,GeoErrors:()=>k,LangUtils:()=>a,Logger:()=>Ue,PersonUtils:()=>l,ReduxConstants:()=>e,ReduxUtils:()=>f,RoutingUtils:()=>p,ValidationUtils:()=>i,WebCryptoUtils:()=>v,default:()=>Ur,useBoolean:()=>J,useError:()=>ie,useGeo:()=>Sr,useGoToRoute:()=>Er,useInput:()=>Tr,useRequestState:()=>Ir,useStepState:()=>Rr,version:()=>xr});var e={};r.r(e),r.d(e,{ACES:()=>d,APP:()=>y,AUTH:()=>g,AUTHORIZATIONS:()=>h,DATA:()=>S,EDM:()=>b,ENTITY_SETS:()=>E,ENTITY_SETS_INDEX_MAP:()=>w,ENTITY_TYPES:()=>m,ENTITY_TYPES_INDEX_MAP:()=>T,ERROR:()=>I,FILTER:()=>A,HITS:()=>R,MEMBERS:()=>x,ORGANIZATION:()=>U,ORGANIZATIONS:()=>q,ORGS:()=>j,PAGE:()=>O,PERMISSIONS:()=>C,PROPERTY_TYPES:()=>N,PROPERTY_TYPES_INDEX_MAP:()=>P,QUERY:()=>D,REQUEST_STATE:()=>L,RESET:()=>M,SEARCH:()=>_,SEARCH_RESULTS:()=>B,TOTAL_HITS:()=>F,USERS:()=>G});var t={};r.r(t),r.d(t,{toSagaError:()=>ce});var o={};r.r(o),r.d(o,{base64ToBuffer:()=>je,bufferToBase64:()=>Pe,bufferToString:()=>Le,stringToBuffer:()=>_e});var i={};r.r(i),r.d(i,{isValidUUID:()=>Fe});var a={};r.r(a),r.d(a,{isDefined:()=>Ke,isEmptyArray:()=>Xe,isEmptyObject:()=>Je,isEmptyString:()=>et,isNonEmptyArray:()=>tt,isNonEmptyObject:()=>rt,isNonEmptyString:()=>it});var s={};r.r(s),r.d(s,{getEntityKeyId:()=>Ge,getPropertyValue:()=>st});var u={};r.r(u),r.d(u,{calculateAge:()=>lt,formatAsDate:()=>dt,formatAsRelative:()=>gt,formatAsTime:()=>yt,formatDateTime:()=>vt});var l={};r.r(l),r.d(l,{getUserId:()=>ht});var c={};r.r(c),r.d(c,{INITIAL_STATE:()=>Mt,reducer:()=>_t});var f={};r.r(f),r.d(f,{isFailure:()=>Ft,isPending:()=>Gt,isStandby:()=>Yt,isSuccess:()=>kt,pagination:()=>c,reduceRequestStates:()=>Vt,selectEntitySets:()=>Wt,selectEntityTypes:()=>zt,selectOrganization:()=>Qt,selectPropertyTypes:()=>$t});var p={};r.r(p),r.d(p,{getParamFromMatch:()=>sr});var v={};r.r(v),r.d(v,{exportPublicKey:()=>pr,generateKeyPair:()=>dr,isWebCryptoAvailable:()=>cr,signData:()=>gr});var d="aces",y="app",g="auth",h="authorizations",S="data",b="edm",E="entitySets",w="entitySetsIndexMap",m="entityTypes",T="entityTypesIndexMap",I="error",A="filter",R="hits",x="members",U="organization",q="organizations",j="orgs",O="page",C="permissions",N="propertyTypes",P="propertyTypesIndexMap",D="query",L="requestState",M="reset",_="search",B="searchResults",F="totalHits",G="users",Y=r(474);const k=r.n(Y)()({NOT_SUPPORTED:"NOT_SUPPORTED",PERMISSION_DENIED:"PERMISSION_DENIED",POSITION_UNAVAILABLE:"POSITION_UNAVAILABLE",TIMEOUT:"TIMEOUT"});var V=r(363);var W=r(446),H=r(996);var K=r(238),z=r(592);function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function X(e,t){var r;if(e){if("string"==typeof e)return Q(e,t);var n=K(r=Object.prototype.toString.call(e)).call(r,8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?z(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Q(e,t):void 0}}function Z(e,t){return function(e){if(V(e))return e}(e)||function(e,t){var r=null==e?null:void 0!==W&&H(e)||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}}(e,t)||X(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const $=require("react");const J=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,$.useState)(e),r=Z(t,2),n=r[0],o=r[1];(0,$.useEffect)((function(){o(e)}),[e]);var i=(0,$.useCallback)((function(){o(!0)}),[]),a=(0,$.useCallback)((function(){o(!1)}),[]);return[n,i,a]};function ee(e){return function(e){if(V(e))return Q(e)}(e)||function(e){if(void 0!==W&&null!=H(e)||null!=e["@@iterator"])return z(e)}(e)||X(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var te=r(766),re=r.n(te);const ne=require("immutable"),oe=require("react-redux");const ie=function(e){var t=(0,oe.useSelector)((function(t){var r;return(0,ne.getIn)(t,re()(r=[]).call(r,ee(e),[I]))}));if(t)return t};var ae=r(580),se=r.n(ae);const ue=require("lodash/get");var le=r.n(ue);function ce(e){var t=e;if(t.isAxiosError&&t.response){var r=t.response;return{message:le()(r,["data","errors",0,"message"]),status:r.status,statusText:r.statusText}}return{}}const fe=require("lodash/isString");var pe=r.n(fe);var ve=r(341);function de(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),ve(e,n.key,n)}}const ye=require("lodash/isEmpty");var ge=r.n(ye);const he=require("lodash/isError");var Se=r.n(he),be=r(43),Ee=r.n(be),we="trace",me="debug",Te="info",Ie="warn",Ae="error";function Re(e){return pe()(e)&&!ge()(e)}function xe(e,t){var r,n,o;return re()(r=re()(n=re()(o="[".concat((new Date).toISOString()," ")).call(o,e.toUpperCase()," ")).call(n,"lattice-utils","] ")).call(r,t)}Ee().setLevel(Ee().levels.INFO);var Ue=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.logger=Ee().getLogger(t),this.name=t}var t,r,n;return t=e,r=[{key:"log",value:function(e,t){var r,n,o=xe(e,this.name);Re(t)?this.logger[e](re()(r="".concat(o," - ")).call(r,t)):(this.logger[e](o),e!==we&&(!Se()(t)&&ge()(t)||this.logger[e](t)));for(var i=arguments.length,a=new Array(i>2?i-2:0),s=2;s<i;s++)a[s-2]=arguments[s];a.length>0&&(n=this.logger)[e].apply(n,a)}},{key:"trace",value:function(e){this.log(we,e)}},{key:"debug",value:function(e){for(var t,r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];this.log.apply(this,re()(t=[me,e]).call(t,n))}},{key:"info",value:function(e){for(var t,r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];this.log.apply(this,re()(t=[Te,e]).call(t,n))}},{key:"warn",value:function(e){for(var t,r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];this.log.apply(this,re()(t=[Ie,e]).call(t,n))}},{key:"error",value:function(e){for(var t,r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];this.log.apply(this,re()(t=[Ae,e]).call(t,n))}}],r&&de(t.prototype,r),n&&de(t,n),e}(),qe=new Ue("BinaryUtils");function je(e){if(!pe()(e)){var t='invalid parameter: "value" must be a string';throw qe.error(t,e),new Error(t)}for(var r=atob(e),n=r.length,o=new ArrayBuffer(n),i=new Uint8Array(o),a=0;a<n;a+=1)i[a]=r.charCodeAt(a);return o}const Oe=require("lodash/isArrayBuffer");var Ce=r.n(Oe),Ne=new Ue("BinaryUtils");function Pe(e){if(!Ce()(e)){var t='invalid parameter: "value" must be an ArrayBuffer';throw Ne.error(t,e),new Error(t)}var r=String.fromCharCode.apply(null,new Uint8Array(e));return btoa(r)}var De=new Ue("BinaryUtils");function Le(e){if(!Ce()(e)){var t='invalid parameter: "value" must be an ArrayBuffer';throw De.error(t,e),new Error(t)}var r=String.fromCharCode.apply(null,new Uint8Array(e));return decodeURIComponent(escape(r))}var Me=new Ue("BinaryUtils");function _e(e){if(!pe()(e)){var t='invalid parameter: "value" must be a string';throw Me.error(t,e),new Error(t)}for(var r=unescape(encodeURIComponent(e)),n=r.length,o=new ArrayBuffer(n),i=new Uint8Array(o),a=0;a<n;a+=1)i[a]=r.charCodeAt(a);return o}var Be=/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i;function Fe(e){return pe()(e)&&Be.test(e)}function Ge(e){var t=(0,ne.getIn)(e,["openlattice.@id",0]);if(Fe(t))return t}const Ye=require("lattice"),ke=require("lodash/isNull");var Ve=r.n(ke);const We=require("lodash/isUndefined");var He=r.n(We);function Ke(e){return!Ve()(e)&&!He()(e)}const ze=require("lodash/isArray");var Qe=r.n(ze);function Xe(e){return Qe()(e)&&ge()(e)}const Ze=require("lodash/isPlainObject");var $e=r.n(Ze);function Je(e){return $e()(e)&&ge()(e)}function et(e){return pe()(e)&&ge()(e)}function tt(e){return Qe()(e)&&!ge()(e)}function rt(e){return $e()(e)&&!ge()(e)}const nt=require("lodash/trim");var ot=r.n(nt);function it(e){return pe()(e)&&!ge()(ot()(e))}var at=Ye.Models.FQN;function st(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return tt(t)?(0,ne.getIn)(e,t,r):at.isValid(t)?(0,ne.get)(e,t,r):r}const ut=require("luxon");function lt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=ut.DateTime.fromISO(e);return t.isValid?t.until(ut.DateTime.local()).toDuration("years").years:-1}var ct="---",ft="Today",pt="Yesterday";function vt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ct,n=ut.DateTime.fromISO(e);return n.isValid?n.toLocaleString(t):r}function dt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ct;return vt(e,ut.DateTime.DATE_SHORT,t)}function yt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ct;return vt(e,ut.DateTime.TIME_SIMPLE,t)}function gt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=ut.DateTime.fromISO(e),n=ut.DateTime.local(),o=n.minus({days:1});return n.hasSame(r,"day")?ft:o.hasSame(r,"day")?pt:r.isValid?r.toRelative():t}function ht(e){var t,r;if(Ke(e))return it(t=(0,ne.getIn)(e,["profile","user_id"]))?t:(t=(0,ne.getIn)(e,["principal","principal","id"]),r=(0,ne.getIn)(e,["principal","principal","type"]),it(t)&&"USER"===r?t:(t=(0,ne.get)(e,"id"),r=(0,ne.get)(e,"type"),it(t)&&"USER"===r||it(t=(0,ne.get)(e,"user_id"))?t:void 0))}var St=r(902),bt=r.n(St),Et=r(310),wt=r.n(Et),mt=r(116),Tt=r.n(mt),It=r(74),At=r.n(It),Rt=r(914),xt=r.n(Rt),Ut=r(649),qt=r.n(Ut),jt=r(368),Ot=r.n(jt),Ct=r(978),Nt=r.n(Ct);function Pt(e,t,r){return t in e?ve(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Dt(e,t){var r=bt()(e);if(wt()){var n=wt()(e);t&&(n=Tt()(n).call(n,(function(t){return At()(e,t).enumerable}))),r.push.apply(r,n)}return r}function Lt(e){for(var t=1;t<arguments.length;t++){var r,n=null!=arguments[t]?arguments[t]:{};if(t%2)xt()(r=Dt(Object(n),!0)).call(r,(function(t){Pt(e,t,n[t])}));else if(qt())Ot()(e,qt()(n));else{var o;xt()(o=Dt(Object(n))).call(o,(function(t){Nt()(e,t,At()(n,t))}))}}return e}var Mt={page:1,query:"",start:0},_t=function(e,t){switch(t.type){case A:return Lt(Lt({},e),{},{query:t.query||Mt.query});case O:return Lt(Lt({},e),{},{page:t.page||Mt.page,start:t.start||Mt.start});case M:return Mt;default:return e}};const Bt=require("redux-reqseq");function Ft(e){return e===Bt.RequestStates.FAILURE}function Gt(e){return e===Bt.RequestStates.PENDING}function Yt(e){return e===Bt.RequestStates.STANDBY}function kt(e){return e===Bt.RequestStates.SUCCESS}function Vt(e){if(Qe()(e)&&e.length){var t=!1,r=!1,n=!1,o=0,i=0;if(xt()(e).call(e,(function(e){e===Bt.RequestStates.FAILURE?r=!0:e===Bt.RequestStates.PENDING?n=!0:e===Bt.RequestStates.SUCCESS?o+=1:e===Bt.RequestStates.STANDBY?i+=1:t=!0})),!t)return r?Bt.RequestStates.FAILURE:n?Bt.RequestStates.PENDING:o===e.length?Bt.RequestStates.SUCCESS:i===e.length?Bt.RequestStates.STANDBY:void 0}}function Wt(e){return function(t){return Qe()(e)||(0,ne.isCollection)(e)?(0,ne.Map)().withMutations((function(r){xt()(e).call(e,(function(e){if(Fe(e)||it(e)){var n=(0,ne.getIn)(t,[b,w,e],-1);if(n>=0){var o=(0,ne.getIn)(t,[b,E,n]);o&&o.id&&r.set(o.id,o)}}}))})):(0,ne.Map)()}}var Ht=Ye.Models.FQN,Kt=(0,ne.Map)();function zt(e){return function(t){if(!Qe()(e)&&!(0,ne.isCollection)(e))return Kt;var r=(0,ne.Map)().withMutations((function(r){xt()(e).call(e,(function(e){if(Fe(e)||Ht.isValid(e)){var n=(0,ne.getIn)(t,[b,T,e],-1);if(n>=0){var o=(0,ne.getIn)(t,[b,m,n]);o&&o.id&&r.set(o.id,o)}}}))}));return r.isEmpty()?Kt:r}}function Qt(e){return function(t){if(Fe(e)&&(0,ne.hasIn)(t,[q,j,e]))return(0,ne.getIn)(t,[q,j,e])}}var Xt=Ye.Models.FQN,Zt=(0,ne.Map)();function $t(e){return function(t){if(!Qe()(e)&&!(0,ne.isCollection)(e))return Zt;var r=(0,ne.Map)().withMutations((function(r){xt()(e).call(e,(function(e){if(Fe(e)||Xt.isValid(e)){var n=(0,ne.getIn)(t,[b,P,e],-1);if(n>=0){var o=(0,ne.getIn)(t,[b,N,n]);o&&o.id&&r.set(o.id,o)}}}))}));return r.isEmpty()?Zt:r}}var Jt=r(828),er=r.n(Jt),tr=r(987),rr=r.n(tr);const nr=require("lodash/has");var or=r.n(nr);const ir=require("lodash/isObject");var ar=r.n(ir);function sr(e,t){if(ar()(e)&&pe()(t)){var r=e.params,n=void 0===r?{}:r,o=t;if(er()(t).call(t,":")&&(o=rr()(t).call(t,1)),or()(n,o))return n[o]}return null}var ur=r(476),lr=r.n(ur);function cr(){return"[object Crypto]"===Object.prototype.toString.call(window.crypto)&&"[object SubtleCrypto]"===Object.prototype.toString.call(window.crypto.subtle)}var fr=new Ue("WebCryptoUtils");function pr(e){var t="";return cr()?e?window.crypto.subtle.exportKey("raw",e).then((function(e){return e})).catch((function(e){return fr.error(e),lr().reject(e)})):(t='invalid parameter: "publicKey" must be a valid CryptoKey',fr.error(t),lr().reject(new Error(t))):(t="WebCrypto API not available",fr.error(t),lr().reject(new Error(t)))}var vr=new Ue("WebCryptoUtils");function dr(){var e="";return cr()?window.crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!0,["sign","verify"]).then((function(e){return e})).catch((function(e){return vr.error(e),lr().reject(e)})):(e="WebCrypto API not available",vr.error(e),lr().reject(new Error(e)))}var yr=new Ue("WebCryptoUtils");function gr(e,t){var r="";return cr()?it(t)?window.crypto.subtle.sign({hash:"SHA-256",name:"ECDSA"},e,_e(t)).then((function(e){return e})).catch((function(e){return yr.error(e),lr().reject(e)})):(r='invalid parameter: "data" must be a non-empty string',yr.error(r),lr().reject(new Error(r))):(r="WebCrypto API not available",yr.error(r),lr().reject(new Error(r)))}var hr=new Ue("useGeo");const Sr=function(){var e=Z((0,$.useState)(),2),t=e[0],r=e[1],n=Z((0,$.useState)(),2),o=n[0],i=n[1],a=function(e){var t,r=e.message;se()(t=r.toLowerCase()).call(t,"denied")&&(r=k.PERMISSION_DENIED);var n=new Error(r);hr.error(n),i(n)},s=function(e){r(e)};return(0,$.useEffect)((function(){try{var e=navigator.geolocation;if(!e)throw new Error(k.NOT_SUPPORTED);e.getCurrentPosition(s,a)}catch(e){a(e)}}),[]),[t,o,!t&&!o]};var br="GO_TO_ROUTE";const Er=function(e,t){var r=(0,oe.useDispatch)();return(0,$.useCallback)((function(){return r(function(e){return{route:e,state:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},type:br}}(e,t))}),[r,t,e])};var wr=r(60),mr=r.n(wr);const Tr=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=(0,$.useState)(e),n=Z(r,2),o=n[0],i=n[1],a=(0,$.useCallback)((function(e){var r=e.currentTarget.value,n=t?mr()(r):r;i(n)}),[t,i]);return[o,a]};const Ir=function(e){var t=(0,oe.useSelector)((function(t){var r;return(0,ne.getIn)(t,re()(r=[]).call(r,ee(e),[L]))}));if(Bt.RequestStates[t])return t};var Ar=function(e,t){return e>=0&&e<t};function Rr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(0,$.useState)(t),n=Z(r,2),o=n[0],i=n[1];if(!Ar(t,e))throw new RangeError('"initial" must be between 0 and '.concat(e));var a=function(t){Ar(t,e)&&i(t)},s=function(){return a(o-1)},u=function(){return a(o+1)};return[o,s,u,a]}var xr="v0.12.0";const Ur={AxiosUtils:t,BinaryUtils:o,DataUtils:s,DateTimeUtils:u,GeoErrors:k,LangUtils:a,Logger:Ue,PersonUtils:l,ReduxConstants:e,ReduxUtils:f,RoutingUtils:p,ValidationUtils:i,WebCryptoUtils:v,useBoolean:J,useError:ie,useGeo:Sr,useGoToRoute:Er,useInput:Tr,useRequestState:Ir,useStepState:Rr,version:xr}})(),n})()}));