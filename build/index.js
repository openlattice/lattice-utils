/*!
 * 
 * lattice-utils - v0.11.0
 * OpenLattice JavaScript library for common utilities
 * https://github.com/openlattice/lattice-utils
 *
 * Copyright (c) 2017-2021, OpenLattice, Inc. All rights reserved.
 *
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.LatticeUtils=t():e.LatticeUtils=t()}(self,(function(){return(()=>{var e={766:(e,t,r)=>{e.exports=r(10)},116:(e,t,r)=>{e.exports=r(672)},914:(e,t,r)=>{e.exports=r(142)},580:(e,t,r)=>{e.exports=r(1)},987:(e,t,r)=>{e.exports=r(646)},828:(e,t,r)=>{e.exports=r(214)},368:(e,t,r)=>{e.exports=r(833)},978:(e,t,r)=>{e.exports=r(598)},474:(e,t,r)=>{e.exports=r(568)},74:(e,t,r)=>{e.exports=r(91)},649:(e,t,r)=>{e.exports=r(389)},310:(e,t,r)=>{e.exports=r(143)},902:(e,t,r)=>{e.exports=r(986)},60:(e,t,r)=>{e.exports=r(117)},476:(e,t,r)=>{e.exports=r(863)},592:(e,t,r)=>{e.exports=r(387)},363:(e,t,r)=>{e.exports=r(801)},976:(e,t,r)=>{e.exports=r(659)},238:(e,t,r)=>{e.exports=r(85)},317:(e,t,r)=>{e.exports=r(21)},341:(e,t,r)=>{e.exports=r(219)},446:(e,t,r)=>{e.exports=r(564)},43:function(e,t,r){var n,o;!function(i,a){"use strict";void 0===(o="function"==typeof(n=function(){var e=function(){},t="undefined",r=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),n=["trace","debug","info","warn","error"];function o(e,t){var r=e[t];if("function"==typeof r.bind)return r.bind(e);try{return Function.prototype.bind.call(r,e)}catch(t){return function(){return Function.prototype.apply.apply(r,[e,arguments])}}}function i(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function a(n){return"debug"===n&&(n="log"),typeof console!==t&&("trace"===n&&r?i:void 0!==console[n]?o(console,n):void 0!==console.log?o(console,"log"):e)}function s(t,r){for(var o=0;o<n.length;o++){var i=n[o];this[i]=o<t?e:this.methodFactory(i,t,r)}this.log=this.debug}function u(e,r,n){return function(){typeof console!==t&&(s.call(this,r,n),this[e].apply(this,arguments))}}function l(e,t,r){return a(e)||u.apply(this,arguments)}function c(e,r,o){var i,a=this,u="loglevel";function c(e){var r=(n[e]||"silent").toUpperCase();if(typeof window!==t&&u){try{return void(window.localStorage[u]=r)}catch(e){}try{window.document.cookie=encodeURIComponent(u)+"="+r+";"}catch(e){}}}function f(){var e;if(typeof window!==t&&u){try{e=window.localStorage[u]}catch(e){}if(typeof e===t)try{var r=window.document.cookie,n=r.indexOf(encodeURIComponent(u)+"=");-1!==n&&(e=/^([^;]+)/.exec(r.slice(n))[1])}catch(e){}return void 0===a.levels[e]&&(e=void 0),e}}"string"==typeof e?u+=":"+e:"symbol"==typeof e&&(u=void 0),a.name=e,a.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},a.methodFactory=o||l,a.getLevel=function(){return i},a.setLevel=function(r,n){if("string"==typeof r&&void 0!==a.levels[r.toUpperCase()]&&(r=a.levels[r.toUpperCase()]),!("number"==typeof r&&r>=0&&r<=a.levels.SILENT))throw"log.setLevel() called with invalid level: "+r;if(i=r,!1!==n&&c(r),s.call(a,r,e),typeof console===t&&r<a.levels.SILENT)return"No console available for logging"},a.setDefaultLevel=function(e){f()||a.setLevel(e,!1)},a.enableAll=function(e){a.setLevel(a.levels.TRACE,e)},a.disableAll=function(e){a.setLevel(a.levels.SILENT,e)};var p=f();null==p&&(p=null==r?"WARN":r),a.setLevel(p,!1)}var f=new c,p={};f.getLogger=function(e){if("symbol"!=typeof e&&"string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=p[e];return t||(t=p[e]=new c(e,f.getLevel(),f.methodFactory)),t};var v=typeof window!==t?window.log:void 0;return f.noConflict=function(){return typeof window!==t&&window.log===f&&(window.log=v),f},f.getLoggers=function(){return p},f.default=f,f})?n.call(t,r,t,e):n)||(e.exports=o)}()},387:e=>{"use strict";e.exports=require("core-js-pure/features/array/from")},801:e=>{"use strict";e.exports=require("core-js-pure/features/array/is-array")},659:e=>{"use strict";e.exports=require("core-js-pure/features/get-iterator")},85:e=>{"use strict";e.exports=require("core-js-pure/features/instance/slice")},21:e=>{"use strict";e.exports=require("core-js-pure/features/is-iterable")},219:e=>{"use strict";e.exports=require("core-js-pure/features/object/define-property")},564:e=>{"use strict";e.exports=require("core-js-pure/features/symbol")},10:e=>{"use strict";e.exports=require("core-js-pure/stable/instance/concat")},672:e=>{"use strict";e.exports=require("core-js-pure/stable/instance/filter")},142:e=>{"use strict";e.exports=require("core-js-pure/stable/instance/for-each")},1:e=>{"use strict";e.exports=require("core-js-pure/stable/instance/includes")},646:e=>{"use strict";e.exports=require("core-js-pure/stable/instance/slice")},214:e=>{"use strict";e.exports=require("core-js-pure/stable/instance/starts-with")},833:e=>{"use strict";e.exports=require("core-js-pure/stable/object/define-properties")},598:e=>{"use strict";e.exports=require("core-js-pure/stable/object/define-property")},568:e=>{"use strict";e.exports=require("core-js-pure/stable/object/freeze")},91:e=>{"use strict";e.exports=require("core-js-pure/stable/object/get-own-property-descriptor")},389:e=>{"use strict";e.exports=require("core-js-pure/stable/object/get-own-property-descriptors")},143:e=>{"use strict";e.exports=require("core-js-pure/stable/object/get-own-property-symbols")},986:e=>{"use strict";e.exports=require("core-js-pure/stable/object/keys")},117:e=>{"use strict";e.exports=require("core-js-pure/stable/parse-float")},863:e=>{"use strict";e.exports=require("core-js-pure/stable/promise")}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,r),i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};return(()=>{"use strict";r.r(n),r.d(n,{AxiosUtils:()=>t,BinaryUtils:()=>o,DataUtils:()=>s,DateTimeUtils:()=>u,GeoErrors:()=>k,LangUtils:()=>a,Logger:()=>qe,PersonUtils:()=>l,ReduxConstants:()=>e,ReduxUtils:()=>f,RoutingUtils:()=>p,ValidationUtils:()=>i,WebCryptoUtils:()=>v,default:()=>qr,useBoolean:()=>ee,useError:()=>ae,useGeo:()=>br,useGoToRoute:()=>wr,useInput:()=>Ir,useRequestState:()=>Ar,useStepState:()=>Rr,version:()=>Ur});var e={};r.r(e),r.d(e,{ACES:()=>d,APP:()=>y,AUTH:()=>g,AUTHORIZATIONS:()=>h,DATA:()=>S,EDM:()=>b,ENTITY_SETS:()=>E,ENTITY_SETS_INDEX_MAP:()=>w,ENTITY_TYPES:()=>m,ENTITY_TYPES_INDEX_MAP:()=>T,ERROR:()=>I,FILTER:()=>A,HITS:()=>x,MEMBERS:()=>R,ORGANIZATION:()=>U,ORGANIZATIONS:()=>q,ORGS:()=>j,PAGE:()=>O,PERMISSIONS:()=>C,PROPERTY_TYPES:()=>N,PROPERTY_TYPES_INDEX_MAP:()=>P,QUERY:()=>D,REQUEST_STATE:()=>L,RESET:()=>M,SEARCH:()=>_,SEARCH_RESULTS:()=>B,TOTAL_HITS:()=>F,USERS:()=>G});var t={};r.r(t),r.d(t,{toSagaError:()=>fe});var o={};r.r(o),r.d(o,{base64ToBuffer:()=>Oe,bufferToBase64:()=>De,bufferToString:()=>Me,stringToBuffer:()=>Be});var i={};r.r(i),r.d(i,{isValidUUID:()=>Ge});var a={};r.r(a),r.d(a,{isDefined:()=>ze,isEmptyArray:()=>Ze,isEmptyObject:()=>et,isEmptyString:()=>tt,isNonEmptyArray:()=>rt,isNonEmptyObject:()=>nt,isNonEmptyString:()=>at});var s={};r.r(s),r.d(s,{getEntityKeyId:()=>Ye,getPropertyValue:()=>ut});var u={};r.r(u),r.d(u,{calculateAge:()=>ct,formatAsDate:()=>yt,formatAsRelative:()=>ht,formatAsTime:()=>gt,formatDateTime:()=>dt});var l={};r.r(l),r.d(l,{getUserId:()=>St});var c={};r.r(c),r.d(c,{INITIAL_STATE:()=>_t,reducer:()=>Bt});var f={};r.r(f),r.d(f,{isFailure:()=>Gt,isPending:()=>Yt,isStandby:()=>kt,isSuccess:()=>Vt,pagination:()=>c,reduceRequestStates:()=>Wt,selectEntitySets:()=>Ht,selectEntityTypes:()=>Qt,selectOrganization:()=>Xt,selectPropertyTypes:()=>Jt});var p={};r.r(p),r.d(p,{getParamFromMatch:()=>ur});var v={};r.r(v),r.d(v,{exportPublicKey:()=>vr,generateKeyPair:()=>yr,isWebCryptoAvailable:()=>fr,signData:()=>hr});var d="aces",y="app",g="auth",h="authorizations",S="data",b="edm",E="entitySets",w="entitySetsIndexMap",m="entityTypes",T="entityTypesIndexMap",I="error",A="filter",x="hits",R="members",U="organization",q="organizations",j="orgs",O="page",C="permissions",N="propertyTypes",P="propertyTypesIndexMap",D="query",L="requestState",M="reset",_="search",B="searchResults",F="totalHits",G="users",Y=r(474);const k=r.n(Y)()({NOT_SUPPORTED:"NOT_SUPPORTED",PERMISSION_DENIED:"PERMISSION_DENIED",POSITION_UNAVAILABLE:"POSITION_UNAVAILABLE",TIMEOUT:"TIMEOUT"});var V=r(363);var W=r(446),H=r(317),K=r(976);var z=r(238),Q=r(592);function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Z(e,t){var r;if(e){if("string"==typeof e)return X(e,t);var n=z(r=Object.prototype.toString.call(e)).call(r,8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Q(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?X(e,t):void 0}}function $(e,t){return function(e){if(V(e))return e}(e)||function(e,t){if(void 0!==W&&H(Object(e))){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=K(e);!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return r}}(e,t)||Z(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const J=require("react");const ee=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,J.useState)(e),r=$(t,2),n=r[0],o=r[1];(0,J.useEffect)((function(){o(e)}),[e]);var i=(0,J.useCallback)((function(){o(!0)}),[]),a=(0,J.useCallback)((function(){o(!1)}),[]);return[n,i,a]};function te(e){return function(e){if(V(e))return X(e)}(e)||function(e){if(void 0!==W&&H(Object(e)))return Q(e)}(e)||Z(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var re=r(766),ne=r.n(re);const oe=require("immutable"),ie=require("react-redux");const ae=function(e){var t=(0,ie.useSelector)((function(t){var r;return(0,oe.getIn)(t,ne()(r=[]).call(r,te(e),[I]))}));if(t)return t};var se=r(580),ue=r.n(se);const le=require("lodash/get");var ce=r.n(le);function fe(e){var t=e;if(t.isAxiosError&&t.response){var r=t.response;return{message:ce()(r,["data","errors",0,"message"]),status:r.status,statusText:r.statusText}}return{}}const pe=require("lodash/isString");var ve=r.n(pe);var de=r(341);function ye(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),de(e,n.key,n)}}const ge=require("lodash/isEmpty");var he=r.n(ge);const Se=require("lodash/isError");var be=r.n(Se),Ee=r(43),we=r.n(Ee),me="trace",Te="debug",Ie="info",Ae="warn",xe="error";function Re(e){return ve()(e)&&!he()(e)}function Ue(e,t){var r,n,o;return ne()(r=ne()(n=ne()(o="[".concat((new Date).toISOString()," ")).call(o,e.toUpperCase()," ")).call(n,"lattice-utils","] ")).call(r,t)}we().setLevel(we().levels.INFO);var qe=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.logger=we().getLogger(t),this.name=t}var t,r,n;return t=e,(r=[{key:"log",value:function(e,t){var r,n,o=Ue(e,this.name);Re(t)?this.logger[e](ne()(r="".concat(o," - ")).call(r,t)):(this.logger[e](o),e!==me&&(!be()(t)&&he()(t)||this.logger[e](t)));for(var i=arguments.length,a=new Array(i>2?i-2:0),s=2;s<i;s++)a[s-2]=arguments[s];a.length>0&&(n=this.logger)[e].apply(n,a)}},{key:"trace",value:function(e){this.log(me,e)}},{key:"debug",value:function(e){for(var t,r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];this.log.apply(this,ne()(t=[Te,e]).call(t,n))}},{key:"info",value:function(e){for(var t,r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];this.log.apply(this,ne()(t=[Ie,e]).call(t,n))}},{key:"warn",value:function(e){for(var t,r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];this.log.apply(this,ne()(t=[Ae,e]).call(t,n))}},{key:"error",value:function(e){for(var t,r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];this.log.apply(this,ne()(t=[xe,e]).call(t,n))}}])&&ye(t.prototype,r),n&&ye(t,n),e}(),je=new qe("BinaryUtils");function Oe(e){if(!ve()(e)){var t='invalid parameter: "value" must be a string';throw je.error(t,e),new Error(t)}for(var r=atob(e),n=r.length,o=new ArrayBuffer(n),i=new Uint8Array(o),a=0;a<n;a+=1)i[a]=r.charCodeAt(a);return o}const Ce=require("lodash/isArrayBuffer");var Ne=r.n(Ce),Pe=new qe("BinaryUtils");function De(e){if(!Ne()(e)){var t='invalid parameter: "value" must be an ArrayBuffer';throw Pe.error(t,e),new Error(t)}var r=String.fromCharCode.apply(null,new Uint8Array(e));return btoa(r)}var Le=new qe("BinaryUtils");function Me(e){if(!Ne()(e)){var t='invalid parameter: "value" must be an ArrayBuffer';throw Le.error(t,e),new Error(t)}var r=String.fromCharCode.apply(null,new Uint8Array(e));return decodeURIComponent(escape(r))}var _e=new qe("BinaryUtils");function Be(e){if(!ve()(e)){var t='invalid parameter: "value" must be a string';throw _e.error(t,e),new Error(t)}for(var r=unescape(encodeURIComponent(e)),n=r.length,o=new ArrayBuffer(n),i=new Uint8Array(o),a=0;a<n;a+=1)i[a]=r.charCodeAt(a);return o}var Fe=/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i;function Ge(e){return ve()(e)&&Fe.test(e)}function Ye(e){var t=(0,oe.getIn)(e,["openlattice.@id",0]);if(Ge(t))return t}const ke=require("lattice"),Ve=require("lodash/isNull");var We=r.n(Ve);const He=require("lodash/isUndefined");var Ke=r.n(He);function ze(e){return!We()(e)&&!Ke()(e)}const Qe=require("lodash/isArray");var Xe=r.n(Qe);function Ze(e){return Xe()(e)&&he()(e)}const $e=require("lodash/isPlainObject");var Je=r.n($e);function et(e){return Je()(e)&&he()(e)}function tt(e){return ve()(e)&&he()(e)}function rt(e){return Xe()(e)&&!he()(e)}function nt(e){return Je()(e)&&!he()(e)}const ot=require("lodash/trim");var it=r.n(ot);function at(e){return ve()(e)&&!he()(it()(e))}var st=ke.Models.FQN;function ut(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return rt(t)?(0,oe.getIn)(e,t,r):st.isValid(t)?(0,oe.get)(e,t,r):r}const lt=require("luxon");function ct(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=lt.DateTime.fromISO(e);return t.isValid?t.until(lt.DateTime.local()).toDuration("years").years:-1}var ft="---",pt="Today",vt="Yesterday";function dt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ft,n=lt.DateTime.fromISO(e);return n.isValid?n.toLocaleString(t):r}function yt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ft;return dt(e,lt.DateTime.DATE_SHORT,t)}function gt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ft;return dt(e,lt.DateTime.TIME_SIMPLE,t)}function ht(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=lt.DateTime.fromISO(e),n=lt.DateTime.local(),o=n.minus({days:1});return n.hasSame(r,"day")?pt:o.hasSame(r,"day")?vt:r.isValid?r.toRelative():t}function St(e){var t,r;if(ze(e))return at(t=(0,oe.getIn)(e,["profile","user_id"]))?t:(t=(0,oe.getIn)(e,["principal","principal","id"]),r=(0,oe.getIn)(e,["principal","principal","type"]),at(t)&&"USER"===r?t:(t=(0,oe.get)(e,"id"),r=(0,oe.get)(e,"type"),at(t)&&"USER"===r||at(t=(0,oe.get)(e,"user_id"))?t:void 0))}var bt=r(902),Et=r.n(bt),wt=r(310),mt=r.n(wt),Tt=r(116),It=r.n(Tt),At=r(74),xt=r.n(At),Rt=r(914),Ut=r.n(Rt),qt=r(649),jt=r.n(qt),Ot=r(368),Ct=r.n(Ot),Nt=r(978),Pt=r.n(Nt);function Dt(e,t,r){return t in e?de(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Lt(e,t){var r=Et()(e);if(mt()){var n=mt()(e);t&&(n=It()(n).call(n,(function(t){return xt()(e,t).enumerable}))),r.push.apply(r,n)}return r}function Mt(e){for(var t=1;t<arguments.length;t++){var r,n=null!=arguments[t]?arguments[t]:{};if(t%2)Ut()(r=Lt(Object(n),!0)).call(r,(function(t){Dt(e,t,n[t])}));else if(jt())Ct()(e,jt()(n));else{var o;Ut()(o=Lt(Object(n))).call(o,(function(t){Pt()(e,t,xt()(n,t))}))}}return e}var _t={page:1,query:"",start:0},Bt=function(e,t){switch(t.type){case A:return Mt(Mt({},e),{},{query:t.query||_t.query});case O:return Mt(Mt({},e),{},{page:t.page||_t.page,start:t.start||_t.start});case M:return _t;default:return e}};const Ft=require("redux-reqseq");function Gt(e){return e===Ft.RequestStates.FAILURE}function Yt(e){return e===Ft.RequestStates.PENDING}function kt(e){return e===Ft.RequestStates.STANDBY}function Vt(e){return e===Ft.RequestStates.SUCCESS}function Wt(e){if(Xe()(e)&&e.length){var t=!1,r=!1,n=!1,o=0,i=0;if(Ut()(e).call(e,(function(e){e===Ft.RequestStates.FAILURE?r=!0:e===Ft.RequestStates.PENDING?n=!0:e===Ft.RequestStates.SUCCESS?o+=1:e===Ft.RequestStates.STANDBY?i+=1:t=!0})),!t)return r?Ft.RequestStates.FAILURE:n?Ft.RequestStates.PENDING:o===e.length?Ft.RequestStates.SUCCESS:i===e.length?Ft.RequestStates.STANDBY:void 0}}function Ht(e){return function(t){return Xe()(e)||(0,oe.isCollection)(e)?(0,oe.Map)().withMutations((function(r){Ut()(e).call(e,(function(e){if(Ge(e)||at(e)){var n=(0,oe.getIn)(t,[b,w,e],-1);if(n>=0){var o=(0,oe.getIn)(t,[b,E,n]);o&&o.id&&r.set(o.id,o)}}}))})):(0,oe.Map)()}}var Kt=ke.Models.FQN,zt=(0,oe.Map)();function Qt(e){return function(t){if(!Xe()(e)&&!(0,oe.isCollection)(e))return zt;var r=(0,oe.Map)().withMutations((function(r){Ut()(e).call(e,(function(e){if(Ge(e)||Kt.isValid(e)){var n=(0,oe.getIn)(t,[b,T,e],-1);if(n>=0){var o=(0,oe.getIn)(t,[b,m,n]);o&&o.id&&r.set(o.id,o)}}}))}));return r.isEmpty()?zt:r}}function Xt(e){return function(t){if(Ge(e)&&(0,oe.hasIn)(t,[q,j,e]))return(0,oe.getIn)(t,[q,j,e])}}var Zt=ke.Models.FQN,$t=(0,oe.Map)();function Jt(e){return function(t){if(!Xe()(e)&&!(0,oe.isCollection)(e))return $t;var r=(0,oe.Map)().withMutations((function(r){Ut()(e).call(e,(function(e){if(Ge(e)||Zt.isValid(e)){var n=(0,oe.getIn)(t,[b,P,e],-1);if(n>=0){var o=(0,oe.getIn)(t,[b,N,n]);o&&o.id&&r.set(o.id,o)}}}))}));return r.isEmpty()?$t:r}}var er=r(828),tr=r.n(er),rr=r(987),nr=r.n(rr);const or=require("lodash/has");var ir=r.n(or);const ar=require("lodash/isObject");var sr=r.n(ar);function ur(e,t){if(sr()(e)&&ve()(t)){var r=e.params,n=void 0===r?{}:r,o=t;if(tr()(t).call(t,":")&&(o=nr()(t).call(t,1)),ir()(n,o))return n[o]}return null}var lr=r(476),cr=r.n(lr);function fr(){return"[object Crypto]"===Object.prototype.toString.call(window.crypto)&&"[object SubtleCrypto]"===Object.prototype.toString.call(window.crypto.subtle)}var pr=new qe("WebCryptoUtils");function vr(e){var t="";return fr()?e?window.crypto.subtle.exportKey("raw",e).then((function(e){return e})).catch((function(e){return pr.error(e),cr().reject(e)})):(t='invalid parameter: "publicKey" must be a valid CryptoKey',pr.error(t),cr().reject(new Error(t))):(t="WebCrypto API not available",pr.error(t),cr().reject(new Error(t)))}var dr=new qe("WebCryptoUtils");function yr(){var e="";return fr()?window.crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!0,["sign","verify"]).then((function(e){return e})).catch((function(e){return dr.error(e),cr().reject(e)})):(e="WebCrypto API not available",dr.error(e),cr().reject(new Error(e)))}var gr=new qe("WebCryptoUtils");function hr(e,t){var r="";return fr()?at(t)?window.crypto.subtle.sign({hash:"SHA-256",name:"ECDSA"},e,Be(t)).then((function(e){return e})).catch((function(e){return gr.error(e),cr().reject(e)})):(r='invalid parameter: "data" must be a non-empty string',gr.error(r),cr().reject(new Error(r))):(r="WebCrypto API not available",gr.error(r),cr().reject(new Error(r)))}var Sr=new qe("useGeo");const br=function(){var e=$((0,J.useState)(),2),t=e[0],r=e[1],n=$((0,J.useState)(),2),o=n[0],i=n[1],a=function(e){var t,r=e.message;ue()(t=r.toLowerCase()).call(t,"denied")&&(r=k.PERMISSION_DENIED);var n=new Error(r);Sr.error(n),i(n)},s=function(e){r(e)};return(0,J.useEffect)((function(){try{var e=navigator.geolocation;if(!e)throw new Error(k.NOT_SUPPORTED);e.getCurrentPosition(s,a)}catch(e){a(e)}}),[]),[t,o,!t&&!o]};var Er="GO_TO_ROUTE";const wr=function(e,t){var r=(0,ie.useDispatch)();return(0,J.useCallback)((function(){return r(function(e){return{route:e,state:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},type:Er}}(e,t))}),[r,t,e])};var mr=r(60),Tr=r.n(mr);const Ir=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=(0,J.useState)(e),n=$(r,2),o=n[0],i=n[1],a=(0,J.useCallback)((function(e){var r=e.currentTarget.value,n=t?Tr()(r):r;i(n)}),[t,i]);return[o,a]};const Ar=function(e){var t=(0,ie.useSelector)((function(t){var r;return(0,oe.getIn)(t,ne()(r=[]).call(r,te(e),[L]))}));if(Ft.RequestStates[t])return t};var xr=function(e,t){return e>=0&&e<t};function Rr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(0,J.useState)(t),n=$(r,2),o=n[0],i=n[1];if(!xr(t,e))throw new RangeError('"initial" must be between 0 and '.concat(e));var a=function(t){xr(t,e)&&i(t)},s=function(){return a(o-1)},u=function(){return a(o+1)};return[o,s,u,a]}var Ur="v0.11.0";const qr={AxiosUtils:t,BinaryUtils:o,DataUtils:s,DateTimeUtils:u,GeoErrors:k,LangUtils:a,Logger:qe,PersonUtils:l,ReduxConstants:e,ReduxUtils:f,RoutingUtils:p,ValidationUtils:i,WebCryptoUtils:v,useBoolean:ee,useError:ae,useGeo:br,useGoToRoute:wr,useInput:Ir,useRequestState:Ar,useStepState:Rr,version:Ur}})(),n})()}));